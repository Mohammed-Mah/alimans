<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive 3D Orbit Propagator</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-image: url('https://images.pexels.com/photos/957061/milky-way-starry-sky-night-sky-star-957061.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
        
        canvas {
            display: block;
        }
        
        .controls {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 10px;
            color: white;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
        }
    </style>
</head>

<body>
    <div class="controls">
        <label>
            Semi-Major Axis (AU):
            <input type="number" id="semiMajorAxis" value="1" step="0.1">
        </label>
        <label>
            Eccentricity:
            <input type="number" id="eccentricity" value="0.5" step="0.01" min="0" max="1">
        </label>
        <label>
            Argument of Periapsis (degrees):
            <input type="number" id="periapsis" value="0" step="1">
        </label>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Basic setup
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Create the Sun
        const sunGeometry = new THREE.SphereGeometry(2, 32, 32);
        const sunMaterial = new THREE.MeshBasicMaterial({
            color: 0xffcc00
        });
        const sun = new THREE.Mesh(sunGeometry, sunMaterial);
        scene.add(sun);

        // Planets data
        const planetsData = [{
            name: 'Mercury',
            color: 0xaaaaaa,
            distance: 3,
            radius: 0.5
        }, {
            name: 'Venus',
            color: 0xff9900,
            distance: 5,
            radius: 0.6
        }, {
            name: 'Earth',
            color: 0x0000ff,
            distance: 7,
            radius: 0.7
        }, {
            name: 'Mars',
            color: 0xff0000,
            distance: 9,
            radius: 0.6
        }, {
            name: 'Jupiter',
            color: 0xaa6600,
            distance: 12,
            radius: 1.2
        }];

        const planets = [];

        // Create Planets
        planetsData.forEach(data => {
            const geometry = new THREE.SphereGeometry(data.radius, 32, 32);
            const material = new THREE.MeshBasicMaterial({
                color: data.color
            });
            const planet = new THREE.Mesh(geometry, material);
            planet.position.x = data.distance;
            scene.add(planet);
            planets.push({
                mesh: planet,
                distance: data.distance
            });
        });

        // Camera position
        camera.position.z = 20;

        // Variables for orbital controls
        let time = 0;

        function animate() {
            requestAnimationFrame(animate);

            // Get user inputs
            const semiMajorAxis = parseFloat(document.getElementById("semiMajorAxis").value);
            const eccentricity = parseFloat(document.getElementById("eccentricity").value);
            const periapsis = parseFloat(document.getElementById("periapsis").value) * (Math.PI / 180);

            // Animate planets' orbits
            planets.forEach((planetObj, index) => {
                const planet = planetObj.mesh;
                const distance = planetObj.distance * semiMajorAxis;
                const angle = time + (index * 45); // Angle is increased based on index
                const x = distance * Math.cos(angle) * (1 - eccentricity);
                const y = distance * Math.sin(angle) * (1 - eccentricity) * Math.cos(periapsis);

                planet.position.set(x, y, 0);
            });

            time += 0.01; // Increment time for smooth animation
            renderer.render(scene, camera);
        }

        animate();

        // Responsive canvas resize
        window.addEventListener('resize', () => {
            renderer.setSize(window.innerWidth, window.innerHeight);
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
        });
    </script>
</body>

</html>